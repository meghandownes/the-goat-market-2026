---
title: Git Workflow and GitHub Pages Publishing Guide
subtitle: Step-by-step instructions for commits, pushes, force-pushes, and Quarto rendering
format: html
theme: lux
---

## 1. Make clean, descriptive commits

Assume you are in the repo root (for you, `the-goat-market-2026`).

1. **Check where you are**
   - `pwd` (confirm you're in the project folder)
   - `ls` (you should see `quarto.yml`, `index.qmd`, `courses/`, `docs/`, etc.)

2. **See what changed**
   - `git status`
   - Optionally `git diff` to inspect changes before staging.

3. **Stage your changes**
   - To stage everything:
     ```bash
     git add .
     ```
   - To be more surgical (recommended when possible):
     ```bash
     git add path/to/file.qmd path/to/other-file.qmd
     ```

4. **Write a meaningful commit message**
   - `git commit -m "Add ECON2120 chapter 3 content"`
   - Other examples: `"Fix update GitHub Pages output directory to docs"`, `"Publish reorganize course structure at root level"`

---

## 2. Normal push to GitHub (no force)

For standard updates, this is all you need.

1. **Ensure you are on the correct branch**
   - `git branch` (your default is usually `main`)

2. **Push your commits**
   ```bash
   git push origin main
   ```

3. **GitHub Pages auto-deploy**
   - Your repo is configured to serve from `main` branch, `docs` folder.
   - After the push, GitHub Pages re-serves the files from `docs`, and changes are usually visible within 1–2 minutes at your site URL.

---

## 3. If you are the only dev and must force-push

Only use this when you intentionally rewrite history (e.g., `git rebase`, removing bad commits, cleaning large files). Since you're the only repo dev, you won't break anyone else, but you can still lose history permanently.

1. **Confirm you're truly alone on the repo**
   - No students or collaborators pushing directly to this repo.

2. **Rewrite history locally (if needed)**
   - Example: `git rebase -i HEAD~3` to clean the last 3 commits.
   - Re-run tests / previews to confirm the repo is in a good state.

3. **Force-push with lease (safer than raw `--force`)**
   ```bash
   git push --force-with-lease origin main
   ```
   - This refuses to overwrite remote changes you don't have locally, reducing risk of accidental overwrites.

4. **Document major history changes**
   - Consider a commit message or note in `project-documentation.md` (e.g., "2026-02-01: Rebased main to remove large files; force-pushed").

---

## 4. Quarto render and publish to GitHub Pages

Your Quarto project is configured to render the entire site into `docs/`, which GitHub Pages serves.

1. **Verify critical Quarto configuration once**
   - In `quarto.yml`, you should have:
     - `project: type: website`
     - `output-dir: docs` (not `site`)
   - Site URL set appropriately, e.g. `site-url: https://meghandownes.github.io/the-goat-market-2026`

2. **Render the full site (terminal)**
   - From repo root:
     ```bash
     quarto render
     ```
   - Quarto:
     - Finds `quarto.yml` at root.
     - Scans all `.qmd` files in root and `courses/` subdirectories.
     - Writes HTML to `docs/` mirroring the folder structure (e.g., `courses/econ2120/index.qmd` → `docs/courses/econ2120/index.html`).

3. **(Optional) Render a single file**
   ```bash
   quarto render courses/econ2120/index.qmd
   ```
   - Useful for quick iteration on one page.

4. **Preview locally before pushing**
   ```bash
   quarto preview
   ```
   - Live-reload preview while editing.

5. **Commit and push rendered changes**
   ```bash
   git status
   git add .
   git commit -m "Render site after ECON2120 chapter updates"
   git push origin main
   ```

6. **GitHub Pages updates**
   - The repo is configured under Settings → Pages to use:
     - Source: "Deploy from branch"
     - Branch: `main`
     - Folder: `/docs`
   - After the push, GitHub Pages serves the new `docs/` content; check the site after a couple of minutes.

---

## 5. Updating the site after later changes

This is your "everyday" cycle for new or revised content.

1. **Edit content**
   - Change `.qmd` files in `courses/`, `index.qmd`, or `resources/` as needed.

2. **Render updated pages**
   - For small changes, either:
     ```bash
     quarto render
     ```
     to rebuild everything, or
     ```bash
     quarto render path/to/specific.qmd
     ```
     if you're confident about dependencies.
   - If structure changes (navbar, site-wide theme, new course), prefer full `quarto render` to avoid stale pages.

3. **Sanity check locally**
   - `quarto preview` and click through the updated pages.

4. **Commit and push**
   ```bash
   git status
   git add .
   git commit -m "Update ECON304 schedule and resources"
   git push origin main
   ```

5. **Verify production site**
   - Wait 1–2 minutes, then visit the site URL in a fresh browser tab or after hard refresh (Ctrl+Shift+R).
   - If it still shows old content:
     - Double-check that content actually rendered into `docs/`.
     - Confirm Settings → Pages still points to `main` / `docs`.
     - If needed, push a tiny "rebuild" commit (e.g., touch a doc, commit "Trigger rebuild") and push again.

---

## 6. Quick reference cheat sheet

You can keep this block as a handy operational summary.

```bash
# Everyday update cycle
cd the-goat-market-2026
quarto render          # or 'quarto render path/to/file.qmd'
git status
git add .
git commit -m "Describe the change clearly"
git push origin main   # GitHub Pages auto-updates from docs/

# Only-if-needed history rewrite (sole maintainer)
git rebase -i HEAD~N   # clean up commits
git push --force-with-lease origin main
```

This keeps your commits clean, your `docs/` folder as the single source of truth for the published site, and GitHub Pages updates predictable and safe.
